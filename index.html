<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz B√≠blico</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --azul-vibrante: #4A90E2;
            --roxo: #8E44AD;
            --dourado: #F1C40F;
            --branco: #FFFFFF;
            --cinza-claro: #F5F5F5;
            --cinza-escuro: #333333;
            --verde: #2ECC71;
            --vermelho: #E74C3C;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--roxo);
            color: var(--branco);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        h1, h2, h3 {
            font-family: 'Montserrat', sans-serif;
            text-align: center;
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            color: var(--dourado);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        button {
            background-color: var(--azul-vibrante);
            color: var(--branco);
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Roboto', sans-serif;
            margin: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            background-color: #3a7bc8;
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .tela {
            display: none;
            width: 100%;
            flex-direction: column;
            align-items: center;
            animation: fadeIn 0.5s ease;
        }
        
        .tela.ativa {
            display: flex;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .menu-opcoes {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 30px;
        }
        
        .menu-opcoes button {
            min-width: 200px;
            height: 80px;
            font-size: 1.3rem;
        }
        
        .pergunta-container {
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            width: 100%;
            max-width: 800px;
        }
        
        .pergunta-texto {
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .opcoes-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        @media (min-width: 768px) {
            .opcoes-container {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .opcao {
            background-color: rgba(255, 255, 255, 0.2);
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .opcao:hover {
            background-color: rgba(255, 255, 255, 0.3);
            border-color: var(--azul-vibrante);
        }
        
        .opcao.selecionada {
            background-color: var(--azul-vibrante);
            border-color: var(--dourado);
        }
        
        .opcao.correta {
            background-color: var(--verde);
            border-color: var(--dourado);
        }
        
        .opcao.incorreta {
            background-color: var(--vermelho);
        }
        
        .barra-progresso {
            width: 100%;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progresso {
            height: 100%;
            background-color: var(--dourado);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .contador-tempo {
            font-size: 1.2rem;
            margin: 10px 0;
            text-align: center;
        }
        
        .resultado-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .resultado-acerto {
            color: var(--verde);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .resultado-erro {
            color: var(--vermelho);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .figurinha-ganha {
            background-color: var(--dourado);
            color: var(--cinza-escuro);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .ranking-container {
            width: 100%;
            max-width: 600px;
            margin: 20px 0;
        }
        
        .ranking-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background-color: rgba(255, 255, 255, 0.1);
            margin: 5px 0;
            border-radius: 5px;
            transition: transform 0.3s ease;
        }
        
        .ranking-item:hover {
            transform: translateX(5px);
        }
        
        .ranking-posicao {
            font-weight: bold;
            color: var(--dourado);
        }
        
        .album-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            width: 100%;
            margin: 20px 0;
        }
        
        .figurinha-card {
            background-color: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .figurinha-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .figurinha-card.comum {
            border: 2px solid var(--azul-vibrante);
        }
        
        .figurinha-card.rara {
            border: 2px solid var(--dourado);
            animation: brilho 2s infinite;
        }
        
        .figurinha-card.lendaria {
            border: 2px solid var(--roxo);
            animation: brilhoIntenso 1.5s infinite;
        }
        
        @keyframes brilho {
            0% { box-shadow: 0 0 5px var(--dourado); }
            50% { box-shadow: 0 0 20px var(--dourado); }
            100% { box-shadow: 0 0 5px var(--dourado); }
        }
        
        @keyframes brilhoIntenso {
            0% { box-shadow: 0 0 10px var(--roxo); }
            50% { box-shadow: 0 0 30px var(--roxo); }
            100% { box-shadow: 0 0 10px var(--roxo); }
        }
        
        .figurinha-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .figurinha-nome {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .figurinha-categoria {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        .sala-container {
            width: 100%;
            max-width: 600px;
            margin: 20px 0;
        }
        
        .sala-info {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .jogadores-sala {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }
        
        .jogador-item {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        
        .filtro-categorias {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .filtro-btn {
            background-color: rgba(255, 255, 255, 0.1);
            margin: 5px;
        }
        
        .filtro-btn.ativo {
            background-color: var(--azul-vibrante);
        }
        
        .vazia {
            text-align: center;
            padding: 30px;
            opacity: 0.7;
        }
        
        .voltar-btn {
            background-color: rgba(255, 255, 255, 0.2);
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            button {
                padding: 10px 20px;
                font-size: 1rem;
            }
            
            .menu-opcoes button {
                min-width: 150px;
                height: 70px;
                font-size: 1.1rem;
            }
            
            .pergunta-texto {
                font-size: 1.2rem;
            }
            
            .album-container {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Tela Inicial -->
        <div id="tela-inicial" class="tela ativa">
            <h1>Quiz B√≠blico</h1>
            <p>Teste seu conhecimento b√≠blico, coleciona figurinhas e divirta-se!</p>
            
            <div class="menu-opcoes">
                <button id="btn-solo">Modo Solo</button>
                <button id="btn-multiplayer">Modo Multiplayer</button>
                <button id="btn-ranking">Ranking Global</button>
                <button id="btn-album">√Ålbum de Figurinhas</button>
            </div>
        </div>
        
        <!-- Tela de Sele√ß√£o de Dificuldade (Solo) -->
        <div id="tela-dificuldade" class="tela">
            <h2>Escolha a Dificuldade</h2>
            <div class="menu-opcoes">
                <button class="dificuldade-btn" data-dificuldade="facil">F√°cil</button>
                <button class="dificuldade-btn" data-dificuldade="medio">M√©dio</button>
                <button class="dificuldade-btn" data-dificuldade="dificil">Dif√≠cil</button>
            </div>
            <button class="voltar-btn">Voltar</button>
        </div>
        
        <!-- Tela de Pergunta (Solo) -->
        <div id="tela-pergunta" class="tela">
            <h2>Modo Solo</h2>
            <div class="contador-tempo">Tempo: <span id="tempo-restante">30</span>s</div>
            <div class="barra-progresso">
                <div class="progresso" id="barra-progresso"></div>
            </div>
            
            <div class="pergunta-container">
                <div class="pergunta-texto" id="texto-pergunta">Carregando pergunta...</div>
                <div class="opcoes-container" id="opcoes-container">
                    <!-- Op√ß√µes ser√£o inseridas dinamicamente -->
                </div>
            </div>
            
            <button id="btn-confirmar" disabled>Confirmar Resposta</button>
        </div>
        
        <!-- Tela de Resultado (Solo) -->
        <div id="tela-resultado" class="tela">
            <h2>Resultado</h2>
            <div class="resultado-container">
                <div id="resultado-texto" class="resultado-acerto">Resposta Correta!</div>
                <div id="figurinha-ganha-container" class="figurinha-ganha" style="display: none;">
                    <h3>Nova Figurinha!</h3>
                    <div id="figurinha-ganha-info"></div>
                </div>
                <p>Sua pontua√ß√£o: <span id="pontuacao-atual">0</span> pontos</p>
            </div>
            <button id="btn-proxima-pergunta">Pr√≥xima Pergunta</button>
            <button class="voltar-btn">Voltar ao In√≠cio</button>
        </div>
        
        <!-- Tela de Multiplayer -->
        <div id="tela-multiplayer" class="tela">
            <h2>Modo Multiplayer</h2>
            <div class="menu-opcoes">
                <button id="btn-criar-sala">Criar Sala</button>
                <button id="btn-entrar-sala">Entrar em Sala</button>
            </div>
            <button class="voltar-btn">Voltar</button>
        </div>
        
        <!-- Tela de Sala (Multiplayer) -->
        <div id="tela-sala" class="tela">
            <h2>Sala Multiplayer</h2>
            <div class="sala-info">
                <p>ID da Sala: <span id="sala-id">ABC123</span></p>
                <p>Jogadores: <span id="contador-jogadores">1</span>/15</p>
            </div>
            
            <div class="jogadores-sala" id="jogadores-sala">
                <!-- Jogadores ser√£o inseridos dinamicamente -->
            </div>
            
            <button id="btn-iniciar-jogo" disabled>Iniciar Jogo</button>
            <button class="voltar-btn">Sair da Sala</button>
        </div>
        
        <!-- Tela de Ranking -->
        <div id="tela-ranking" class="tela">
            <h2>Ranking Global</h2>
            <div class="ranking-container" id="ranking-container">
                <!-- Itens de ranking ser√£o inseridos dinamicamente -->
            </div>
            <button class="voltar-btn">Voltar</button>
        </div>
        
        <!-- Tela de √Ålbum -->
        <div id="tela-album" class="tela">
            <h2>√Ålbum de Figurinhas</h2>
            
            <div class="filtro-categorias">
                <button class="filtro-btn ativo" data-categoria="todas">Todas</button>
                <button class="filtro-btn" data-categoria="comum">Comum</button>
                <button class="filtro-btn" data-categoria="rara">Rara</button>
                <button class="filtro-btn" data-categoria="lendaria">Lend√°ria</button>
            </div>
            
            <div class="album-container" id="album-container">
                <!-- Figurinhas ser√£o inseridas dinamicamente -->
            </div>
            
            <button class="voltar-btn">Voltar</button>
        </div>
    </div>

    <script>
        // Dados do jogo
        const perguntas = {
            "facil": [
                {
                    "pergunta": "Quem construiu a arca?",
                    "opcoes": ["Mois√©s", "No√©", "Abra√£o", "Josu√©"],
                    "resposta": "No√©"
                },
                {
                    "pergunta": "Quantos disc√≠pulos Jesus escolheu?",
                    "opcoes": ["7", "12", "10", "15"],
                    "resposta": "12"
                },
                {
                    "pergunta": "Qual foi o primeiro milagre de Jesus?",
                    "opcoes": ["Cura do cego", "Ressurrei√ß√£o de L√°zaro", "Transforma√ß√£o de √°gua em vinho", "Caminhar sobre as √°guas"],
                    "resposta": "Transforma√ß√£o de √°gua em vinho"
                },
                {
                    "pergunta": "Quem foi jogado na cova dos le√µes?",
                    "opcoes": ["Jos√©", "Davi", "Daniel", "Jonas"],
                    "resposta": "Daniel"
                },
                {
                    "pergunta": "Qual √© o primeiro livro da B√≠blia?",
                    "opcoes": ["√äxodo", "G√™nesis", "Mateus", "Salmos"],
                    "resposta": "G√™nesis"
                }
            ],
            "medio": [
                {
                    "pergunta": "Qual ap√≥stolo era coletor de impostos antes de seguir Jesus?",
                    "opcoes": ["Pedro", "Jo√£o", "Mateus", "Andr√©"],
                    "resposta": "Mateus"
                },
                {
                    "pergunta": "Quem foi o primeiro m√°rtir da igreja crist√£?",
                    "opcoes": ["Pedro", "Paulo", "Est√™v√£o", "Tiago"],
                    "resposta": "Est√™v√£o"
                },
                {
                    "pergunta": "Qual profeta foi engolido por um grande peixe?",
                    "opcoes": ["Jeremias", "Isa√≠as", "Jonas", "Ezequiel"],
                    "resposta": "Jonas"
                },
                {
                    "pergunta": "Quem interpretou o sonho de Fara√≥ sobre as vacas magras e gordas?",
                    "opcoes": ["Mois√©s", "Jos√©", "Daniel", "Salom√£o"],
                    "resposta": "Jos√©"
                }
            ],
            "dificil": [
                {
                    "pergunta": "Quantos anos tinha No√© quando come√ßou a chover para o dil√∫vio?",
                    "opcoes": ["500 anos", "600 anos", "700 anos", "800 anos"],
                    "resposta": "600 anos"
                },
                {
                    "pergunta": "Qual ap√≥stolo era conhecido como 'Zelote'?",
                    "opcoes": ["Sim√£o", "Judas Iscariotes", "Judas Tadeu", "Tiago"],
                    "resposta": "Sim√£o"
                },
                {
                    "pergunta": "Em qual livro da B√≠blia encontramos a hist√≥ria de Ester?",
                    "opcoes": ["Rute", "Ester", "Esdras", "Neemias"],
                    "resposta": "Ester"
                },
                {
                    "pergunta": "Quem foi o pai de Isaque?",
                    "opcoes": ["Abra√£o", "Jac√≥", "Ismael", "Esa√∫"],
                    "resposta": "Abra√£o"
                }
            ]
        };

        const figurinhas = [
            { nome: "Pomba Branca", categoria: "comum", icon: "üïäÔ∏è" },
            { nome: "Arca de No√©", categoria: "comum", icon: "üö¢" },
            { nome: "T√°buas da Lei", categoria: "comum", icon: "üìú" },
            { nome: "Cruz", categoria: "comum", icon: "‚úùÔ∏è" },
            { nome: "Peixe Crist√£o", categoria: "comum", icon: "üêü" },
            { nome: "David com Harpa", categoria: "rara", icon: "üéµ" },
            { nome: "Sans√£o", categoria: "rara", icon: "üí™" },
            { nome: "Muro de Jeric√≥", categoria: "rara", icon: "üß±" },
            { nome: "Man√° do C√©u", categoria: "rara", icon: "üçû" },
            { nome: "Arca da Alian√ßa", categoria: "lendaria", icon: "üì¶" },
            { nome: "Ressurrei√ß√£o", categoria: "lendaria", icon: "‚ú®" },
            { nome: "Transfigura√ß√£o", categoria: "lendaria", icon: "üåü" }
        ];

        // Estado do jogo
        let estadoJogo = {
            jogador: {
                nome: "Jogador",
                pontuacao: 0,
                figurinhas: []
            },
            modo: null,
            dificuldade: null,
            perguntaAtual: null,
            perguntasRespondidas: [],
            tempoRestante: 30,
            intervalo: null,
            opcaoSelecionada: null,
            sala: null
        };

        // Elementos da interface
        const telas = document.querySelectorAll('.tela');
        const telaInicial = document.getElementById('tela-inicial');
        const telaDificuldade = document.getElementById('tela-dificuldade');
        const telaPergunta = document.getElementById('tela-pergunta');
        const telaResultado = document.getElementById('tela-resultado');
        const telaMultiplayer = document.getElementById('tela-multiplayer');
        const telaSala = document.getElementById('tela-sala');
        const telaRanking = document.getElementById('tela-ranking');
        const telaAlbum = document.getElementById('tela-album');

        // Fun√ß√µes de navega√ß√£o
        function mostrarTela(tela) {
            telas.forEach(t => t.classList.remove('ativa'));
            tela.classList.add('ativa');
        }

        // Event listeners para navega√ß√£o
        document.getElementById('btn-solo').addEventListener('click', () => {
            estadoJogo.modo = 'solo';
            mostrarTela(telaDificuldade);
        });

        document.getElementById('btn-multiplayer').addEventListener('click', () => {
            estadoJogo.modo = 'multiplayer';
            mostrarTela(telaMultiplayer);
        });

        document.getElementById('btn-ranking').addEventListener('click', () => {
            carregarRanking();
            mostrarTela(telaRanking);
        });

        document.getElementById('btn-album').addEventListener('click', () => {
            carregarAlbum();
            mostrarTela(telaAlbum);
        });

        document.querySelectorAll('.voltar-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                mostrarTela(telaInicial);
                resetarJogo();
            });
        });

        // Modo Solo - Sele√ß√£o de dificuldade
        document.querySelectorAll('.dificuldade-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                estadoJogo.dificuldade = e.target.dataset.dificuldade;
                iniciarJogoSolo();
            });
        });

        // Modo Solo - Iniciar jogo
        function iniciarJogoSolo() {
            estadoJogo.perguntasRespondidas = [];
            estadoJogo.jogador.pontuacao = 0;
            carregarPergunta();
            mostrarTela(telaPergunta);
        }

        // Carregar pergunta aleat√≥ria
        function carregarPergunta() {
            // Filtrar perguntas n√£o respondidas
            const perguntasDisponiveis = perguntas[estadoJogo.dificuldade].filter(
                p => !estadoJogo.perguntasRespondidas.includes(p.pergunta)
            );
            
            if (perguntasDisponiveis.length === 0) {
                // Todas as perguntas foram respondidas
                alert('Parab√©ns! Voc√™ completou todas as perguntas deste n√≠vel!');
                mostrarTela(telaInicial);
                return;
            }
            
            // Selecionar pergunta aleat√≥ria
            const indiceAleatorio = Math.floor(Math.random() * perguntasDisponiveis.length);
            estadoJogo.perguntaAtual = perguntasDisponiveis[indiceAleatorio];
            
            // Atualizar interface
            document.getElementById('texto-pergunta').textContent = estadoJogo.perguntaAtual.pergunta;
            
            const opcoesContainer = document.getElementById('opcoes-container');
            opcoesContainer.innerHTML = '';
            
            estadoJogo.perguntaAtual.opcoes.forEach(opcao => {
                const divOpcao = document.createElement('div');
                divOpcao.className = 'opcao';
                divOpcao.textContent = opcao;
                divOpcao.addEventListener('click', () => selecionarOpcao(divOpcao, opcao));
                opcoesContainer.appendChild(divOpcao);
            });
            
            // Resetar estado
            estadoJogo.opcaoSelecionada = null;
            document.getElementById('btn-confirmar').disabled = true;
            estadoJogo.tempoRestante = 30;
            document.getElementById('tempo-restante').textContent = estadoJogo.tempoRestante;
            
            // Atualizar barra de progresso
            const progresso = (estadoJogo.perguntasRespondidas.length / perguntas[estadoJogo.dificuldade].length) * 100;
            document.getElementById('barra-progresso').style.width = `${progresso}%`;
            
            // Iniciar contador
            clearInterval(estadoJogo.intervalo);
            estadoJogo.intervalo = setInterval(atualizarTempo, 1000);
        }

        function selecionarOpcao(elemento, opcao) {
            // Remover sele√ß√£o anterior
            document.querySelectorAll('.opcao').forEach(op => {
                op.classList.remove('selecionada');
            });
            
            // Selecionar nova op√ß√£o
            elemento.classList.add('selecionada');
            estadoJogo.opcaoSelecionada = opcao;
            document.getElementById('btn-confirmar').disabled = false;
        }

        document.getElementById('btn-confirmar').addEventListener('click', verificarResposta);

        function verificarResposta() {
            clearInterval(estadoJogo.intervalo);
            
            // Marcar pergunta como respondida
            estadoJogo.perguntasRespondidas.push(estadoJogo.perguntaAtual.pergunta);
            
            // Verificar se a resposta est√° correta
            const correta = estadoJogo.opcaoSelecionada === estadoJogo.perguntaAtual.resposta;
            
            // Atualizar pontua√ß√£o
            let pontos = 0;
            if (correta) {
                switch(estadoJogo.dificuldade) {
                    case 'facil': pontos = 10; break;
                    case 'medio': pontos = 20; break;
                    case 'dificil': pontos = 30; break;
                }
                estadoJogo.jogador.pontuacao += pontos;
            }
            
            // Mostrar resultado
            mostrarResultado(correta, pontos);
        }

        function atualizarTempo() {
            estadoJogo.tempoRestante--;
            document.getElementById('tempo-restante').textContent = estadoJogo.tempoRestante;
            
            if (estadoJogo.tempoRestante <= 0) {
                clearInterval(estadoJogo.intervalo);
                // Tempo esgotado - resposta incorreta
                estadoJogo.perguntasRespondidas.push(estadoJogo.perguntaAtual.pergunta);
                mostrarResultado(false, 0);
            }
        }

        function mostrarResultado(correta, pontos) {
            const resultadoTexto = document.getElementById('resultado-texto');
            const figurinhaContainer = document.getElementById('figurinha-ganha-container');
            
            if (correta) {
                resultadoTexto.textContent = "Resposta Correta!";
                resultadoTexto.className = "resultado-acerto";
                
                // Chance de ganhar figurinha (50% de chance)
                if (Math.random() < 0.5) {
                    const figurinha = ganharFigurinha();
                    if (figurinha) {
                        figurinhaContainer.style.display = 'block';
                        document.getElementById('figurinha-ganha-info').innerHTML = `
                            <div class="figurinha-icon">${figurinha.icon}</div>
                            <div class="figurinha-nome">${figurinha.nome}</div>
                            <div class="figurinha-categoria">${figurinha.categoria}</div>
                        `;
                    } else {
                        figurinhaContainer.style.display = 'none';
                    }
                } else {
                    figurinhaContainer.style.display = 'none';
                }
            } else {
                resultadoTexto.textContent = "Resposta Incorreta!";
                resultadoTexto.className = "resultado-erro";
                figurinhaContainer.style.display = 'none';
            }
            
            document.getElementById('pontuacao-atual').textContent = estadoJogo.jogador.pontuacao;
            mostrarTela(telaResultado);
        }

        function ganharFigurinha() {
            // Calcular probabilidade baseada na dificuldade
            let probComum = 0.7;
            let probRara = 0.25;
            let probLendaria = 0.05;
            
            // Aumentar chance de figurinhas raras em dificuldades maiores
            if (estadoJogo.dificuldade === 'medio') {
                probComum = 0.6;
                probRara = 0.3;
                probLendaria = 0.1;
            } else if (estadoJogo.dificuldade === 'dificil') {
                probComum = 0.5;
                probRara = 0.35;
                probLendaria = 0.15;
            }
            
            // Selecionar categoria baseada na probabilidade
            const rand = Math.random();
            let categoria;
            
            if (rand < probComum) {
                categoria = 'comum';
            } else if (rand < probComum + probRara) {
                categoria = 'rara';
            } else {
                categoria = 'lendaria';
            }
            
            // Filtrar figurinhas dispon√≠veis por categoria
            const figurinhasDisponiveis = figurinhas.filter(f => 
                f.categoria === categoria && 
                !estadoJogo.jogador.figurinhas.some(jf => jf.nome === f.nome)
            );
            
            if (figurinhasDisponiveis.length === 0) {
                // Todas as figurinhas desta categoria j√° foram coletadas
                return null;
            }
            
            // Selecionar figurinha aleat√≥ria
            const indiceAleatorio = Math.floor(Math.random() * figurinhasDisponiveis.length);
            const figurinha = figurinhasDisponiveis[indiceAleatorio];
            
            // Adicionar √† cole√ß√£o do jogador
            estadoJogo.jogador.figurinhas.push(figurinha);
            
            return figurinha;
        }

        document.getElementById('btn-proxima-pergunta').addEventListener('click', () => {
            carregarPergunta();
            mostrarTela(telaPergunta);
        });

        // Modo Multiplayer
        document.getElementById('btn-criar-sala').addEventListener('click', criarSala);
        document.getElementById('btn-entrar-sala').addEventListener('click', entrarSala);

        function criarSala() {
            // Simular cria√ß√£o de sala (em uma implementa√ß√£o real, isso seria feito no backend)
            estadoJogo.sala = {
                id: Math.random().toString(36).substring(2, 8).toUpperCase(),
                jogadores: [estadoJogo.jogador],
                estado: 'aguardando'
            };
            
            atualizarTelaSala();
            mostrarTela(telaSala);
        }

        function entrarSala() {
            // Simular entrada em sala (em uma implementa√ß√£o real, isso seria feito no backend)
            const salaId = prompt("Digite o ID da sala:");
            if (salaId) {
                // Simular sala existente
                estadoJogo.sala = {
                    id: salaId,
                    jogadores: [
                        { nome: "Jogador1", pontuacao: 0 },
                        { nome: "Jogador2", pontuacao: 0 },
                        estadoJogo.jogador
                    ],
                    estado: 'aguardando'
                };
                
                atualizarTelaSala();
                mostrarTela(telaSala);
            }
        }

        function atualizarTelaSala() {
            document.getElementById('sala-id').textContent = estadoJogo.sala.id;
            document.getElementById('contador-jogadores').textContent = estadoJogo.sala.jogadores.length;
            
            const jogadoresContainer = document.getElementById('jogadores-sala');
            jogadoresContainer.innerHTML = '';
            
            estadoJogo.sala.jogadores.forEach(jogador => {
                const divJogador = document.createElement('div');
                divJogador.className = 'jogador-item';
                divJogador.textContent = jogador.nome;
                jogadoresContainer.appendChild(divJogador);
            });
            
            // Habilitar bot√£o de iniciar se houver pelo menos 2 jogadores
            document.getElementById('btn-iniciar-jogo').disabled = estadoJogo.sala.jogadores.length < 2;
        }

        document.getElementById('btn-iniciar-jogo').addEventListener('click', () => {
            alert('Iniciando jogo multiplayer! (Funcionalidade completa requer backend)');
            // Em uma implementa√ß√£o real, aqui iniciaria o jogo multiplayer
        });

        // Ranking
        function carregarRanking() {
            // Simular dados de ranking (em uma implementa√ß√£o real, viria do backend)
            const ranking = [
                { nome: "Maria", pontuacao: 150 },
                { nome: "Jo√£o", pontuacao: 120 },
                { nome: "Pedro", pontuacao: 100 },
                { nome: "Ana", pontuacao: 90 },
                { nome: "Jos√©", pontuacao: 80 },
                { nome: estadoJogo.jogador.nome, pontuacao: estadoJogo.jogador.pontuacao }
            ].sort((a, b) => b.pontuacao - a.pontuacao);
            
            const rankingContainer = document.getElementById('ranking-container');
            rankingContainer.innerHTML = '';
            
            ranking.forEach((jogador, index) => {
                const divRanking = document.createElement('div');
                divRanking.className = 'ranking-item';
                divRanking.innerHTML = `
                    <div>
                        <span class="ranking-posicao">${index + 1}¬∫</span> 
                        ${jogador.nome}
                    </div>
                    <div>${jogador.pontuacao} pontos</div>
                `;
                
                // Destacar o jogador atual
                if (jogador.nome === estadoJogo.jogador.nome) {
                    divRanking.style.backgroundColor = 'rgba(74, 144, 226, 0.3)';
                }
                
                rankingContainer.appendChild(divRanking);
            });
        }

        // √Ålbum de Figurinhas
        function carregarAlbum() {
            const albumContainer = document.getElementById('album-container');
            albumContainer.innerHTML = '';
            
            if (estadoJogo.jogador.figurinhas.length === 0) {
                albumContainer.innerHTML = '<div class="vazia">Voc√™ ainda n√£o possui figurinhas. Jogue no modo Solo para coletar!</div>';
                return;
            }
            
            estadoJogo.jogador.figurinhas.forEach(figurinha => {
                const card = document.createElement('div');
                card.className = `figurinha-card ${figurinha.categoria}`;
                card.innerHTML = `
                    <div class="figurinha-icon">${figurinha.icon}</div>
                    <div class="figurinha-nome">${figurinha.nome}</div>
                    <div class="figurinha-categoria">${figurinha.categoria}</div>
                `;
                albumContainer.appendChild(card);
            });
        }

        // Filtro de categorias no √°lbum
        document.querySelectorAll('.filtro-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                // Ativar bot√£o clicado
                document.querySelectorAll('.filtro-btn').forEach(b => b.classList.remove('ativo'));
                e.target.classList.add('ativo');
                
                const categoria = e.target.dataset.categoria;
                filtrarAlbum(categoria);
            });
        });

        function filtrarAlbum(categoria) {
            const cards = document.querySelectorAll('.figurinha-card');
            
            cards.forEach(card => {
                if (categoria === 'todas' || card.classList.contains(categoria)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Resetar estado do jogo
        function resetarJogo() {
            clearInterval(estadoJogo.intervalo);
            estadoJogo.modo = null;
            estadoJogo.dificuldade = null;
            estadoJogo.perguntaAtual = null;
            estadoJogo.perguntasRespondidas = [];
            estadoJogo.tempoRestante = 30;
            estadoJogo.opcaoSelecionada = null;
            estadoJogo.sala = null;
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            // Carregar dados do jogador do localStorage (se existirem)
            const dadosSalvos = localStorage.getItem('quizBiblicoJogador');
            if (dadosSalvos) {
                estadoJogo.jogador = JSON.parse(dadosSalvos);
            }
            
            // Salvar dados do jogador periodicamente
            setInterval(() => {
                localStorage.setItem('quizBiblicoJogador', JSON.stringify(estadoJogo.jogador));
            }, 5000);
        });
    </script>
</body>
</html>