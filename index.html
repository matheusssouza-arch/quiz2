<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz B√≠blico - Individual</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .tela {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-top: 20px;
        }

        .tela.ativa {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
            font-family: 'Montserrat', sans-serif;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-voltar {
            background: #6c757d;
        }

        .btn-continuar {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
        }

        .titulo {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
            font-family: 'Montserrat', sans-serif;
        }

        .subtitulo {
            text-align: center;
            margin-bottom: 20px;
            color: #666;
        }

        /* Estilos para perguntas e op√ß√µes */
        .pergunta-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .texto-pergunta {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 30px;
            color: #333;
            font-family: 'Montserrat', sans-serif;
        }

        .opcoes-container {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .opcao {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .opcao:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .opcao.selecionada {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* Barra de tempo */
        .barra-tempo {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .barra-progresso {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transition: width 1s linear;
        }

        /* Resultados */
        .resultado-acerto {
            color: #4CAF50;
            font-weight: bold;
            font-size: 24px;
        }

        .resultado-erro {
            color: #f44336;
            font-weight: bold;
            font-size: 24px;
        }

        /* Figurinhas */
        .figurinha-card {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 10px;
            display: inline-block;
            width: 150px;
            transition: all 0.3s ease;
        }

        .figurinha-card.comum {
            border-color: #4CAF50;
            background: #E8F5E8;
        }

        .figurinha-card.rara {
            border-color: #2196F3;
            background: #E3F2FD;
        }

        .figurinha-card.lendaria {
            border-color: #FF9800;
            background: #FFF3E0;
        }

        .figurinha-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .vazia {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 40px;
        }

        .filtros {
            text-align: center;
            margin-bottom: 20px;
        }

        .filtro-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 8px 16px;
            margin: 0 5px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filtro-btn.ativo {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .progresso-container {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .progresso-texto {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .progresso-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }

        .progresso-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transition: width 0.5s ease;
        }

        .contador-figurinhas {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        .contador-figurinhas h4 {
            margin-bottom: 10px;
            color: #856404;
        }

        .contador-progresso {
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .contador-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            transition: width 0.5s ease;
        }

        .botoes-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .tela {
                padding: 20px;
            }
            
            .texto-pergunta {
                font-size: 20px;
            }
            
            .btn {
                padding: 12px 24px;
                font-size: 14px;
            }

            .botoes-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Tela Inicial -->
        <div id="tela-inicial" class="tela ativa">
            <h1 class="titulo">üìñ Quiz B√≠blico</h1>
            <p class="subtitulo">Teste seu conhecimento da B√≠blia e colete figurinhas!</p>
            <p class="subtitulo">Acumule 6 acertos para ganhar uma figurinha</p>
            
            <div style="text-align: center; margin-top: 40px;">
                <button id="btn-solo" class="btn">üéÆ Iniciar Jogo</button>
                <button id="btn-album" class="btn">üìí √Ålbum de Figurinhas</button>
            </div>
        </div>

        <!-- Tela Dificuldade -->
        <div id="tela-dificuldade" class="tela">
            <h2 class="titulo">Escolha a Dificuldade</h2>
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn dificuldade-btn" data-dificuldade="facil">üòä F√°cil (10 pontos)</button>
                <button class="btn dificuldade-btn" data-dificuldade="medio">üòê M√©dio (20 pontos)</button>
                <button class="btn dificuldade-btn" data-dificuldade="dificil">üò∞ Dif√≠cil (30 pontos)</button>
            </div>
            <button class="btn btn-voltar voltar-btn" style="margin-top: 20px;">‚Üê Voltar</button>
        </div>

        <!-- Tela Pergunta -->
        <div id="tela-pergunta" class="tela">
            <div class="progresso-container">
                <div class="progresso-texto">
                    <span>Pontua√ß√£o: <strong id="pontuacao-atual-jogo">0</strong></span>
                    <span>Pergunta <span id="pergunta-atual-numero">1</span>/<span id="total-perguntas">10</span></span>
                </div>
                <div class="progresso-bar">
                    <div class="progresso-fill" id="progresso-perguntas" style="width: 0%"></div>
                </div>
            </div>

            <div class="contador-figurinhas">
                <h4>üéØ Progresso para Pr√≥xima Figurinha</h4>
                <div>Acertos: <strong id="acertos-atual">0</strong>/6</div>
                <div class="contador-progresso">
                    <div class="contador-fill" id="progresso-figurinha" style="width: 0%"></div>
                </div>
                <small>Voc√™ precisa de 6 acertos consecutivos para ganhar uma figurinha!</small>
            </div>

            <div class="pergunta-container">
                <div class="texto-pergunta" id="texto-pergunta"></div>
                <div class="barra-tempo">
                    <div class="barra-progresso" id="barra-progresso" style="width: 100%"></div>
                </div>
                <div style="margin-bottom: 20px;">
                    <strong>Tempo restante: <span id="tempo-restante">30</span>s</strong>
                </div>
                <div class="opcoes-container" id="opcoes-container"></div>
                <button id="btn-confirmar" class="btn" disabled>Confirmar Resposta</button>
            </div>
        </div>

        <!-- Tela Resultado -->
        <div id="tela-resultado" class="tela">
            <div style="text-align: center;">
                <div id="resultado-texto" class="resultado-acerto"></div>
                <div style="margin: 20px 0;">
                    <strong>Pontua√ß√£o atual: <span id="pontuacao-atual">0</span> pontos</strong>
                </div>
                
                <div class="contador-figurinhas">
                    <h4>üéØ Progresso para Figurinha</h4>
                    <div>Acertos consecutivos: <strong id="acertos-resultado">0</strong>/6</div>
                    <div class="contador-progresso">
                        <div class="contador-fill" id="progresso-figurinha-resultado" style="width: 0%"></div>
                    </div>
                </div>

                <div id="figurinha-ganha-container" style="display: none; margin: 20px 0;">
                    <h3>üéâ Parab√©ns! Voc√™ ganhou uma figurinha!</h3>
                    <div id="figurinha-ganha-info" class="figurinha-card"></div>
                </div>

                <div id="botoes-proxima" class="botoes-container">
                    <button id="btn-proxima-pergunta" class="btn btn-continuar">Pr√≥xima Pergunta</button>
                    <button class="btn btn-voltar">Voltar ao Menu</button>
                </div>

                <div id="botoes-final" class="botoes-container" style="display: none;">
                    <button id="btn-novo-jogo" class="btn btn-continuar">Novo Jogo</button>
                    <button class="btn btn-voltar">Voltar ao Menu</button>
                </div>
            </div>
        </div>

        <!-- Tela √Ålbum -->
        <div id="tela-album" class="tela">
            <h2 class="titulo">üìí Meu √Ålbum de Figurinhas</h2>
            
            <div class="filtros">
                <button class="filtro-btn ativo" data-categoria="todas">Todas</button>
                <button class="filtro-btn" data-categoria="comum">Comuns</button>
                <button class="filtro-btn" data-categoria="rara">Raras</button>
                <button class="filtro-btn" data-categoria="lendaria">Lend√°rias</button>
            </div>
            
            <div id="album-container"></div>
            <button class="btn btn-voltar voltar-btn" style="margin-top: 20px;">‚Üê Voltar</button>
        </div>
    </div>

    <script>
        // Dados do jogo
        const perguntas = {
            "facil": [
                {
                    "pergunta": "Quem construiu a arca?",
                    "opcoes": ["Mois√©s", "No√©", "Abra√£o", "Josu√©"],
                    "resposta": "No√©"
                },
                {
                    "pergunta": "Quantos disc√≠pulos Jesus escolheu?",
                    "opcoes": ["7", "12", "10", "15"],
                    "resposta": "12"
                },
                {
                    "pergunta": "Qual foi o primeiro milagre de Jesus?",
                    "opcoes": ["Cura do cego", "Ressurrei√ß√£o de L√°zaro", "Transforma√ß√£o de √°gua em vinho", "Caminhar sobre as √°guas"],
                    "resposta": "Transforma√ß√£o de √°gua em vinho"
                },
                {
                    "pergunta": "Quem foi jogado na cova dos le√µes?",
                    "opcoes": ["Jos√©", "Davi", "Daniel", "Jonas"],
                    "resposta": "Daniel"
                },
                {
                    "pergunta": "Qual √© o primeiro livro da B√≠blia?",
                    "opcoes": ["√äxodo", "G√™nesis", "Mateus", "Salmos"],
                    "resposta": "G√™nesis"
                },
                {
                    "pergunta": "Quem traiu Jesus?",
                    "opcoes": ["Pedro", "Jo√£o", "Judas", "Tom√©"],
                    "resposta": "Judas"
                },
                {
                    "pergunta": "Qual animal falou com Bala√£o?",
                    "opcoes": ["Cobra", "Le√£o", "Jumenta", "Cordeiro"],
                    "resposta": "Jumenta"
                },
                {
                    "pergunta": "Quem foi o primeiro rei de Israel?",
                    "opcoes": ["Davi", "Salom√£o", "Saul", "Josu√©"],
                    "resposta": "Saul"
                },
                {
                    "pergunta": "Qual √© o menor livro da B√≠blia?",
                    "opcoes": ["Salmos", "Jo√£o", "III Jo√£o", "Filemom"],
                    "resposta": "III Jo√£o"
                },
                {
                    "pergunta": "Quantos mandamentos Deus deu a Mois√©s?",
                    "opcoes": ["7", "10", "12", "15"],
                    "resposta": "10"
                }
            ],
            "medio": [
                {
                    "pergunta": "Qual ap√≥stolo era coletor de impostos antes de seguir Jesus?",
                    "opcoes": ["Pedro", "Jo√£o", "Mateus", "Andr√©"],
                    "resposta": "Mateus"
                },
                {
                    "pergunta": "Quem foi o primeiro m√°rtir da igreja crist√£?",
                    "opcoes": ["Pedro", "Paulo", "Est√™v√£o", "Tiago"],
                    "resposta": "Est√™v√£o"
                },
                {
                    "pergunta": "Qual profeta foi engolido por um grande peixe?",
                    "opcoes": ["Jeremias", "Isa√≠as", "Jonas", "Ezequiel"],
                    "resposta": "Jonas"
                },
                {
                    "pergunta": "Quem interpretou o sonho de Fara√≥ sobre as vacas magras e gordas?",
                    "opcoes": ["Mois√©s", "Jos√©", "Daniel", "Salom√£o"],
                    "resposta": "Jos√©"
                },
                {
                    "pergunta": "Quantos anos tinha Josu√© quando morreu?",
                    "opcoes": ["100 anos", "110 anos", "120 anos", "130 anos"],
                    "resposta": "110 anos"
                }
            ],
            "dificil": [
                {
                    "pergunta": "Quantos anos tinha No√© quando come√ßou a chover para o dil√∫vio?",
                    "opcoes": ["500 anos", "600 anos", "700 anos", "800 anos"],
                    "resposta": "600 anos"
                },
                {
                    "pergunta": "Qual ap√≥stolo era conhecido como 'Zelote'?",
                    "opcoes": ["Sim√£o", "Judas Iscariotes", "Judas Tadeu", "Tiago"],
                    "resposta": "Sim√£o"
                },
                {
                    "pergunta": "Em qual livro da B√≠blia encontramos a hist√≥ria de Ester?",
                    "opcoes": ["Rute", "Ester", "Esdras", "Neemias"],
                    "resposta": "Ester"
                },
                {
                    "pergunta": "Quem foi o pai de Isaque?",
                    "opcoes": ["Abra√£o", "Jac√≥", "Ismael", "Esa√∫"],
                    "resposta": "Abra√£o"
                },
                {
                    "pergunta": "Quantos filhos teve Jac√≥?",
                    "opcoes": ["10", "12", "13", "14"],
                    "resposta": "12"
                }
            ]
        };

        const figurinhas = [
            { nome: "Pomba Branca", categoria: "comum", icon: "üïäÔ∏è" },
            { nome: "Arca de No√©", categoria: "comum", icon: "üö¢" },
            { nome: "T√°buas da Lei", categoria: "comum", icon: "üìú" },
            { nome: "Cruz", categoria: "comum", icon: "‚úùÔ∏è" },
            { nome: "Peixe Crist√£o", categoria: "comum", icon: "üêü" },
            { nome: "David com Harpa", categoria: "rara", icon: "üéµ" },
            { nome: "Sans√£o", categoria: "rara", icon: "üí™" },
            { nome: "Muro de Jeric√≥", categoria: "rara", icon: "üß±" },
            { nome: "Man√° do C√©u", categoria: "rara", icon: "üçû" },
            { nome: "Arca da Alian√ßa", categoria: "lendaria", icon: "üì¶" },
            { nome: "Ressurrei√ß√£o", categoria: "lendaria", icon: "‚ú®" },
            { nome: "Transfigura√ß√£o", categoria: "lendaria", icon: "üåü" }
        ];

        // Estado do jogo
        let estadoJogo = {
            jogador: {
                id: null,
                nome: "Jogador",
                pontuacao: 0,
                figurinhas: [],
                acertosConsecutivos: 0
            },
            modo: null,
            dificuldade: null,
            perguntaAtual: null,
            perguntasRespondidas: [],
            tempoRestante: 30,
            intervalo: null,
            opcaoSelecionada: null,
            perguntaNumero: 0,
            totalPerguntas: 10,
            jogoFinalizado: false
        };

        // Elementos da interface
        const telas = document.querySelectorAll('.tela');
        const telaInicial = document.getElementById('tela-inicial');
        const telaDificuldade = document.getElementById('tela-dificuldade');
        const telaPergunta = document.getElementById('tela-pergunta');
        const telaResultado = document.getElementById('tela-resultado');
        const telaAlbum = document.getElementById('tela-album');

        // Fun√ß√µes de navega√ß√£o
        function mostrarTela(tela) {
            telas.forEach(t => t.classList.remove('ativa'));
            tela.classList.add('ativa');
        }

        // Event listeners para navega√ß√£o
        document.getElementById('btn-solo').addEventListener('click', () => {
            estadoJogo.modo = 'solo';
            mostrarTela(telaDificuldade);
        });

        document.getElementById('btn-album').addEventListener('click', () => {
            carregarAlbum();
            mostrarTela(telaAlbum);
        });

        document.querySelectorAll('.voltar-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                mostrarTela(telaInicial);
                resetarJogo();
            });
        });

        // Sele√ß√£o de dificuldade
        document.querySelectorAll('.dificuldade-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                estadoJogo.dificuldade = e.target.dataset.dificuldade;
                iniciarJogoSolo();
            });
        });

        // Iniciar jogo
        function iniciarJogoSolo() {
            estadoJogo.perguntasRespondidas = [];
            estadoJogo.jogador.pontuacao = 0;
            estadoJogo.jogador.acertosConsecutivos = 0;
            estadoJogo.perguntaNumero = 0;
            estadoJogo.totalPerguntas = 10;
            estadoJogo.jogoFinalizado = false;
            atualizarContadorFigurinhas();
            carregarPergunta();
            mostrarTela(telaPergunta);
        }

        // Atualizar contador de figurinhas
        function atualizarContadorFigurinhas() {
            const acertos = estadoJogo.jogador.acertosConsecutivos;
            const progresso = (acertos / 6) * 100;
            
            document.getElementById('acertos-atual').textContent = acertos;
            document.getElementById('acertos-resultado').textContent = acertos;
            document.getElementById('progresso-figurinha').style.width = `${progresso}%`;
            document.getElementById('progresso-figurinha-resultado').style.width = `${progresso}%`;
        }

        // Carregar pergunta aleat√≥ria
        function carregarPergunta() {
            estadoJogo.perguntaNumero++;
            
            const perguntasDisponiveis = perguntas[estadoJogo.dificuldade].filter(
                p => !estadoJogo.perguntasRespondidas.includes(p.pergunta)
            );
            
            // Verificar se √© a √∫ltima pergunta
            if (perguntasDisponiveis.length === 0 || estadoJogo.perguntaNumero > estadoJogo.totalPerguntas) {
                finalizarJogo();
                return;
            }
            
            const indiceAleatorio = Math.floor(Math.random() * perguntasDisponiveis.length);
            estadoJogo.perguntaAtual = perguntasDisponiveis[indiceAleatorio];
            
            document.getElementById('texto-pergunta').textContent = estadoJogo.perguntaAtual.pergunta;
            document.getElementById('pontuacao-atual-jogo').textContent = estadoJogo.jogador.pontuacao;
            document.getElementById('pergunta-atual-numero').textContent = estadoJogo.perguntaNumero;
            document.getElementById('total-perguntas').textContent = estadoJogo.totalPerguntas;
            
            const progresso = ((estadoJogo.perguntaNumero - 1) / estadoJogo.totalPerguntas) * 100;
            document.getElementById('progresso-perguntas').style.width = `${progresso}%`;
            
            const opcoesContainer = document.getElementById('opcoes-container');
            opcoesContainer.innerHTML = '';
            
            estadoJogo.perguntaAtual.opcoes.forEach(opcao => {
                const divOpcao = document.createElement('div');
                divOpcao.className = 'opcao';
                divOpcao.textContent = opcao;
                divOpcao.addEventListener('click', () => selecionarOpcao(divOpcao, opcao));
                opcoesContainer.appendChild(divOpcao);
            });
            
            estadoJogo.opcaoSelecionada = null;
            document.getElementById('btn-confirmar').disabled = true;
            estadoJogo.tempoRestante = 30;
            document.getElementById('tempo-restante').textContent = estadoJogo.tempoRestante;
            document.getElementById('barra-progresso').style.width = '100%';
            
            clearInterval(estadoJogo.intervalo);
            estadoJogo.intervalo = setInterval(atualizarTempo, 1000);
        }

        function selecionarOpcao(elemento, opcao) {
            document.querySelectorAll('.opcao').forEach(op => {
                op.classList.remove('selecionada');
            });
            
            elemento.classList.add('selecionada');
            estadoJogo.opcaoSelecionada = opcao;
            document.getElementById('btn-confirmar').disabled = false;
        }

        document.getElementById('btn-confirmar').addEventListener('click', verificarResposta);

        function verificarResposta() {
            clearInterval(estadoJogo.intervalo);
            
            estadoJogo.perguntasRespondidas.push(estadoJogo.perguntaAtual.pergunta);
            
            const correta = estadoJogo.opcaoSelecionada === estadoJogo.perguntaAtual.resposta;
            
            let pontos = 0;
            if (correta) {
                switch(estadoJogo.dificuldade) {
                    case 'facil': pontos = 10; break;
                    case 'medio': pontos = 20; break;
                    case 'dificil': pontos = 30; break;
                }
                estadoJogo.jogador.pontuacao += pontos;
                estadoJogo.jogador.acertosConsecutivos++;
            } else {
                // Reseta o contador de acertos consecutivos se errar
                estadoJogo.jogador.acertosConsecutivos = 0;
            }
            
            mostrarResultado(correta, pontos);
        }

        function atualizarTempo() {
            estadoJogo.tempoRestante--;
            document.getElementById('tempo-restante').textContent = estadoJogo.tempoRestante;
            
            const progresso = (estadoJogo.tempoRestante / 30) * 100;
            document.getElementById('barra-progresso').style.width = `${progresso}%`;
            
            if (estadoJogo.tempoRestante <= 0) {
                clearInterval(estadoJogo.intervalo);
                estadoJogo.perguntasRespondidas.push(estadoJogo.perguntaAtual.pergunta);
                // Reseta o contador se o tempo acabar
                estadoJogo.jogador.acertosConsecutivos = 0;
                mostrarResultado(false, 0);
            }
        }

        function mostrarResultado(correta, pontos) {
            const resultadoTexto = document.getElementById('resultado-texto');
            const figurinhaContainer = document.getElementById('figurinha-ganha-container');
            const botoesProxima = document.getElementById('botoes-proxima');
            const botoesFinal = document.getElementById('botoes-final');
            
            // Atualizar contador antes de mostrar resultado
            atualizarContadorFigurinhas();
            
            // Verificar se √© a √∫ltima pergunta
            const ultimaPergunta = estadoJogo.perguntaNumero >= estadoJogo.totalPerguntas;
            
            if (ultimaPergunta) {
                botoesProxima.style.display = 'none';
                botoesFinal.style.display = 'flex';
                estadoJogo.jogoFinalizado = true;
            } else {
                botoesProxima.style.display = 'flex';
                botoesFinal.style.display = 'none';
            }
            
            if (correta) {
                resultadoTexto.textContent = "Resposta Correta! +" + pontos + " pontos";
                resultadoTexto.className = "resultado-acerto";
                
                // Verificar se atingiu 6 acertos consecutivos
                if (estadoJogo.jogador.acertosConsecutivos >= 6) {
                    const figurinha = ganharFigurinha();
                    if (figurinha) {
                        figurinhaContainer.style.display = 'block';
                        document.getElementById('figurinha-ganha-info').innerHTML = `
                            <div class="figurinha-icon">${figurinha.icon}</div>
                            <div class="figurinha-nome">${figurinha.nome}</div>
                            <div class="figurinha-categoria ${figurinha.categoria}">${figurinha.categoria}</div>
                        `;
                        document.getElementById('figurinha-ganha-info').className = `figurinha-card ${figurinha.categoria}`;
                        
                        // Resetar contador ap√≥s ganhar figurinha
                        estadoJogo.jogador.acertosConsecutivos = 0;
                        atualizarContadorFigurinhas();
                    } else {
                        figurinhaContainer.style.display = 'none';
                    }
                } else {
                    figurinhaContainer.style.display = 'none';
                }
            } else {
                resultadoTexto.textContent = "Resposta Incorreta! A resposta correta era: " + estadoJogo.perguntaAtual.resposta;
                resultadoTexto.className = "resultado-erro";
                figurinhaContainer.style.display = 'none';
            }
            
            document.getElementById('pontuacao-atual').textContent = estadoJogo.jogador.pontuacao;
            mostrarTela(telaResultado);
        }

        // Ganhar figurinha
        function ganharFigurinha() {
            let probComum = 0.7;
            let probRara = 0.25;
            let probLendaria = 0.05;
            
            if (estadoJogo.dificuldade === 'medio') {
                probComum = 0.6;
                probRara = 0.3;
                probLendaria = 0.1;
            } else if (estadoJogo.dificuldade === 'dificil') {
                probComum = 0.5;
                probRara = 0.35;
                probLendaria = 0.15;
            }
            
            const rand = Math.random();
            let categoria;
            
            if (rand < probComum) {
                categoria = 'comum';
            } else if (rand < probComum + probRara) {
                categoria = 'rara';
            } else {
                categoria = 'lendaria';
            }
            
            const figurinhasDisponiveis = figurinhas.filter(f => 
                f.categoria === categoria && 
                !estadoJogo.jogador.figurinhas.some(jf => jf.nome === f.nome)
            );
            
            if (figurinhasDisponiveis.length === 0) {
                // Se n√£o h√° figurinhas dispon√≠veis na categoria, tenta outra categoria
                const todasDisponiveis = figurinhas.filter(f => 
                    !estadoJogo.jogador.figurinhas.some(jf => jf.nome === f.nome)
                );
                if (todasDisponiveis.length === 0) {
                    return null; // J√° tem todas as figurinhas
                }
                const indiceAleatorio = Math.floor(Math.random() * todasDisponiveis.length);
                const figurinha = todasDisponiveis[indiceAleatorio];
                estadoJogo.jogador.figurinhas.push(figurinha);
                salvarDados();
                return figurinha;
            }
            
            const indiceAleatorio = Math.floor(Math.random() * figurinhasDisponiveis.length);
            const figurinha = figurinhasDisponiveis[indiceAleatorio];
            
            estadoJogo.jogador.figurinhas.push(figurinha);
            salvarDados();
            
            return figurinha;
        }

        function finalizarJogo() {
            estadoJogo.jogoFinalizado = true;
            const resultadoTexto = document.getElementById('resultado-texto');
            const figurinhaContainer = document.getElementById('figurinha-ganha-container');
            const botoesProxima = document.getElementById('botoes-proxima');
            const botoesFinal = document.getElementById('botoes-final');
            
            resultadoTexto.textContent = "üéâ Parab√©ns! Voc√™ completou todas as perguntas!";
            resultadoTexto.className = "resultado-acerto";
            
            document.getElementById('pontuacao-atual').textContent = estadoJogo.jogador.pontuacao;
            figurinhaContainer.style.display = 'none';
            
            botoesProxima.style.display = 'none';
            botoesFinal.style.display = 'flex';
            
            mostrarTela(telaResultado);
        }

        // Carregar √°lbum
        function carregarAlbum() {
            const albumContainer = document.getElementById('album-container');
            albumContainer.innerHTML = '';
            
            if (estadoJogo.jogador.figurinhas.length === 0) {
                albumContainer.innerHTML = '<div class="vazia">Voc√™ ainda n√£o possui figurinhas. Acumule 6 acertos consecutivos para ganhar uma!</div>';
                return;
            }
            
            estadoJogo.jogador.figurinhas.forEach(figurinha => {
                const card = document.createElement('div');
                card.className = `figurinha-card ${figurinha.categoria}`;
                card.innerHTML = `
                    <div class="figurinha-icon">${figurinha.icon}</div>
                    <div class="figurinha-nome">${figurinha.nome}</div>
                    <div class="figurinha-categoria">${figurinha.categoria}</div>
                `;
                albumContainer.appendChild(card);
            });
        }

        // Resetar jogo
        function resetarJogo() {
            clearInterval(estadoJogo.intervalo);
            estadoJogo.modo = null;
            estadoJogo.dificuldade = null;
            estadoJogo.perguntaAtual = null;
            estadoJogo.perguntasRespondidas = [];
            estadoJogo.tempoRestante = 30;
            estadoJogo.opcaoSelecionada = null;
            estadoJogo.perguntaNumero = 0;
            estadoJogo.jogoFinalizado = false;
            // N√£o resetar acertosConsecutivos para manter o progresso entre jogos
        }

        // Salvar dados no localStorage
        function salvarDados() {
            localStorage.setItem('quizBiblicoJogador', JSON.stringify(estadoJogo.jogador));
        }

        // Carregar dados do localStorage
        function carregarDados() {
            const dadosSalvos = localStorage.getItem('quizBiblicoJogador');
            if (dadosSalvos) {
                const dados = JSON.parse(dadosSalvos);
                estadoJogo.jogador = { ...estadoJogo.jogador, ...dados };
                // Garantir que acertosConsecutivos existe
                if (!estadoJogo.jogador.acertosConsecutivos) {
                    estadoJogo.jogador.acertosConsecutivos = 0;
                }
            }
        }

        // Filtro de categorias no √°lbum
        document.querySelectorAll('.filtro-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.filtro-btn').forEach(b => b.classList.remove('ativo'));
                e.target.classList.add('ativo');
                filtrarAlbum(e.target.dataset.categoria);
            });
        });

        function filtrarAlbum(categoria) {
            const cards = document.querySelectorAll('.figurinha-card');
            cards.forEach(card => {
                if (categoria === 'todas' || card.classList.contains(categoria)) {
                    card.style.display = 'inline-block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Pr√≥xima pergunta
        document.getElementById('btn-proxima-pergunta').addEventListener('click', () => {
            if (!estadoJogo.jogoFinalizado) {
                carregarPergunta();
                mostrarTela(telaPergunta);
            }
        });

        // Novo jogo
        document.getElementById('btn-novo-jogo').addEventListener('click', () => {
            iniciarJogoSolo();
        });

        // Voltar ao menu (na tela de resultado)
        document.querySelectorAll('#tela-resultado .btn-voltar').forEach(btn => {
            btn.addEventListener('click', () => {
                mostrarTela(telaInicial);
                resetarJogo();
            });
        });

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', () => {
            carregarDados();
            
            if (!estadoJogo.jogador.id) {
                estadoJogo.jogador.id = 'jogador_' + Date.now();
                estadoJogo.jogador.acertosConsecutivos = 0;
                salvarDados();
            }
            
            // Atualizar contador na inicializa√ß√£o
            atualizarContadorFigurinhas();
        });
    </script>
</body>
</html>